# PgBouncer Environment Configuration
# Copy this file to .env and fill in your actual values

# ============================================================================
# Supabase/PostgreSQL Connection Settings
# ============================================================================

# Primary database host (Supabase)
# Example: db.abcdefghijklmnop.supabase.co
SUPABASE_DB_HOST=your-supabase-host.supabase.co

# Database name (usually 'postgres' for Supabase)
SUPABASE_DB_NAME=postgres

# Database user
# For Supabase, this is typically 'postgres'
SUPABASE_DB_USER=postgres

# Database password
# For Supabase, get this from your project settings
SUPABASE_DB_PASSWORD=your-database-password

# Read replica host (if configured)
# Leave same as SUPABASE_DB_HOST if no replica
SUPABASE_DB_REPLICA_HOST=your-replica-host.supabase.co

# ============================================================================
# PgBouncer Admin Settings
# ============================================================================

# PgBouncer admin user
PGBOUNCER_ADMIN_USER=postgres

# PgBouncer stats user
PGBOUNCER_STATS_USER=pgbouncer
PGBOUNCER_STATS_PASSWORD=your-stats-password

# ============================================================================
# Application Connection Settings
# ============================================================================

# Connection string for your Next.js app
# Point this to PgBouncer instead of direct database
# Example: postgresql://postgres:password@localhost:6432/postgres
DATABASE_URL=postgresql://${SUPABASE_DB_USER}:${SUPABASE_DB_PASSWORD}@localhost:6432/${SUPABASE_DB_NAME}

# For Supabase client (still use direct connection for realtime features)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ============================================================================
# Performance Tuning
# ============================================================================

# Maximum database connections (should be less than your plan limit)
# Supabase Free: 60, Pro: 200+
PGBOUNCER_MAX_DB_CONNECTIONS=100

# Default pool size per user+database
PGBOUNCER_DEFAULT_POOL_SIZE=25

# Maximum client connections
PGBOUNCER_MAX_CLIENT_CONN=500

# ============================================================================
# Monitoring
# ============================================================================

# Enable Prometheus metrics exporter
ENABLE_METRICS_EXPORTER=true

# Metrics port
METRICS_PORT=9127
